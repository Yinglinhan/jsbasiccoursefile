# TypedArray 定型数组 类型化数组

## ArrayBuffer

buffer 是一个固定长度的二进制数据缓冲区，可以通过 `ArrayBuffer` 构造函数来创建。

创建后不能调整大小

只负责向系统申请一段内存地址 具体对这段内存地址如何使用 要通过视图来操作 view


TypedArray 是其中一种视图
DataView 也是一种视图

### 定型数组的特点

创建后不能调整大小（数组长度） 
**创建后的每个位置初始值都是0**

1. 只用来存储数字类型的数据
2. 两大种数据 纯整数 和 浮点数 
3. 有符号和无符号 有负数 没负数 
4. 每一种具体的类型其中的数据 都有一个规定的范围

可以和普通数组一样使用索引位访问和设置数据
也有很多和普通数组一样名称的方法可以使用(没有改变数组长度的方法)

### 字节序
DataView和TypedArray视图的字节序是不同的。在使用TypedArray视图时，字节序是固定的，即按照本机字节序（即当前计算机的字节序）进行读写。例如，在一个小端字节序的计算机上，使用Int16Array视图读写数据时，数据就是按照小端字节序进行读写的。

而在使用DataView视图时，字节序可以通过第二个参数指定，如果指定为true，则按照小端字节序进行读写；否则按照大端字节序进行读写。这样就可以在不同字节序的计算机之间进行数据交换。

需要注意的是，在使用DataView视图时，如果不指定字节序，则默认按照大端字节序进行读写。这与TypedArray视图的默认行为是不同的，因此在使用DataView视图时需要格外小心。

是的，不同的计算机的字节序是不一样的。字节序指的是在多字节数据类型（如整数和浮点数）在内存中存储时，字节的排列顺序。在计算机中，每个字节都有一个地址，多字节数据类型的值由多个字节组成，这些字节在内存中按照一定的顺序排列。

有两种常见的字节序：大端字节序（Big-Endian）和小端字节序（Little-Endian）。在大端字节序中，最高位字节存储在最低的地址处，最低位字节存储在最高的地址处；而在小端字节序中，最低位字节存储在最低的地址处，最高位字节存储在最高的地址处。例如，一个16位整数0x1234，在大端字节序中存储为0x12 0x34，在小端字节序中存储为0x34 0x12。

不同的计算机使用的字节序可能不同。例如，Intel x86架构的计算机使用小端字节序，而MIPS架构的计算机使用大端字节序。这就意味着，在进行跨平台数据交换时，需要考虑不同计算机的字节序问题。

在大端字节序中，多字节数据类型的最高位字节（即对应该数据类型最高位的字节）存储在最低的地址处，而最低位字节（即对应该数据类型最低位的字节）存储在最高的地址处。也就是说，多字节数据类型的字节排列顺序是从高地址到低地址依次存储的，最高位字节在最前面，最低位字节在最后面。

举个例子，如果我们要在大端字节序的计算机上存储一个16位整数0x1234，它会被存储为0x12 0x34，其中0x12是该整数的最高位字节，存储在内存的低地址处，0x34是该整数的最低位字节，存储在内存的高地址处。

相反，在小端字节序中，多字节数据类型的最低位字节存储在最低的地址处，而最高位字节存储在最高的地址处。也就是说，多字节数据类型的字节排列顺序是从低地址到高地址依次存储的，最低位字节在最前面，最高位字节在最后面。



### TypedArray数组能够提高读写效率，主要有以下几个原因：

1. 内存连续性：TypedArray数组在内存中是连续存储的，这使得它们的读写速度比普通数组更快。这是因为，当CPU需要访问一个数组元素时，它可以通过缓存预取等技术来提高访问速度，而这些技术都需要数组元素在内存中是连续存储的。
2. 数据类型：TypedArray数组只能存储特定类型的数据，例如整数、浮点数等，这意味着CPU可以更快地对这些数据进行处理，因为它们不需要进行类型转换。
3. 二进制数据：TypedArray数组可以直接操作二进制数据，这使得它们在处理图像、音频、视频等二进制数据时非常高效。使用TypedArray数组，可以避免将二进制数据转换为字符串或其他格式，从而提高了处理速度。
4. 静态类型检查：在使用TypedArray数组时，编译器可以进行静态类型检查，从而避免了一些运行时错误。这也可以提高代码的可维护性和可读性。

总之，TypedArray数组能够提高读写效率的原因是多方面的，包括内存连续性、数据类型、二进制数据和静态类型检查等。在处理大量数据时，使用TypedArray数组可以显著提高程序的性能。

### 普通数组的读写速度相对较慢，主要有以下几个原因：

1. 内存分散：普通数组在内存中的存储方式是分散的，每个元素在内存中的地址并不是连续的。当CPU需要访问一个数组元素时，它需要先找到这个元素在内存中的地址，然后才能进行访问。这个过程可能需要多次内存访问，从而导致速度变慢。
2. 数据类型：普通数组可以存储任意类型的数据，例如整数、浮点数、字符串等。当CPU需要处理这些数据时，它需要进行类型转换，这会消耗额外的时间和资源。
3. 动态类型检查：在使用普通数组时，编译器无法进行静态类型检查，因此无法检测出一些类型错误。这可能导致程序运行时出现错误，从而降低了程序的性能和可靠性。

综上所述，普通数组的读写速度相对较慢，主要是因为它们在内存中的存储方式是分散的、可以存储任意类型的数据，并且无法进行静态类型检查。相比之下，TypedArray数组采用了连续存储、只能存储特定类型的数据，并且可以进行静态类型检查等优化措施，因此能够提高读写速度。